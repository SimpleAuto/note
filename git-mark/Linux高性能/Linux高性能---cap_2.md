# TCP/IP协议族---2

## 学习笔记2

- **应用层: 负责处理应用程序的逻辑,实现在用户空间,包括了Ping(应用程序),talent(远程登录协议),OSPF(开放最短路径优先)协议动态路由更新协议,DNS(域名服务)提供机器域名到IP地址的转换**


### 封装: 上层协议使用下层协议提供的服务的实现方式
### 协议栈: 网络中各层协议的总和,自上向底,再自底向上,每层协议都在上层数据(头部或者尾部)的基础上加上自己的信息

图1

TCP将数据从用户空间拷贝到内核空间,当发送失败需要再次发送的时候,直接可以从内核空间读取并发送数据

UDP将数据从用户空间拷贝到内核空间,当发送成功后,就会把内核空间的缓存删除,如果需要再次发送,会在一次将数据从用户空间拷贝到内核空间,重复动作

帧是最终在物理网络上传送的字节序列,帧的最大传输单元(MTU),表示帧最多能携带多少上层协议数据,但这通常受到网络的限制.

### 分用: 当帧到达目标主机时,沿着协议栈自底向上依次传递,各层协议处理帧中本层负责的头部数据,以获取所需的信息,并最终将处理后的帧交给目标应用程序

分用依靠头部信息中的类型字段实现,根据头部字段类型的值进行区分,根据以太网帧头部帧类型决定是交给IP还是ARP还是RARP模块进行处理,如果交给了IP模块处理,再根据IP头部的16位的protocol字段来区分报文类型,TCP报文段和UDP数据报通过头部的16位的端口号字段来区分上层应用程序.参考 /etc/services文件
